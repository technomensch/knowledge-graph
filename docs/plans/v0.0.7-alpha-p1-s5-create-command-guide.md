# Session 5: Create COMMAND-GUIDE.md

**Branch**: `v0.0.7-alpha-p1-s5`
**Phase**: 1 (Critical UX Fixes)
**Session**: 5 of 9
**Model**: Opus 4.6 â­ (Complex Content Creation)
**Estimated Time**: 1.5-2 hours
**Estimated Tokens**: ~45K
**Status**: â¬œ Not Started
**Parallelizable**: âœ… Yes (with Session 4)

---

## Prerequisites

### Previous Sessions
- [ ] Sessions 1-3 completed and merged
- [ ] Session 4 in progress or completed (can run in parallel)

### Git State
- [ ] Currently on branch: `v0.0.7-alpha-gitbook-docs`
- [ ] Working directory is clean
- [ ] Latest changes pulled

### Verification Commands
```bash
git checkout v0.0.7-alpha-gitbook-docs
git pull origin v0.0.7-alpha-gitbook-docs
git status
```

---

## Session Goals

**Primary Objective**: Create command learning path organized by difficulty with "when to use" guidance

**What We're Creating**:
- `docs/COMMAND-GUIDE.md` - Comprehensive command reference
- Learning path: Essential â†’ Intermediate â†’ Advanced
- Decision trees: "I want to..." â†’ "Use this command"

**Impact**: Users currently discover ~5 of 19 commands. This creates progressive discovery path.

---

## Parallelization Strategy

**âœ… CAN RUN IN PARALLEL** with Session 4 (Create CONCEPTS.md)

**Why**:
- Creates NEW file (no conflicts with Session 4)
- Different content (commands vs concepts)
- No dependencies between sessions

**Coordination**:
- Session 4: Creates docs/CONCEPTS.md
- Session 5: Creates docs/COMMAND-GUIDE.md
- Both can merge independently

**If running in parallel**:
- Use Opus 4.6 for this session
- Session 4 also uses Opus 4.6
- Total: ~95K tokens across both sessions

---

## Files to Modify

### Primary Files (Create)
1. **docs/COMMAND-GUIDE.md** (new file, ~500-600 lines)
   - Commands by difficulty
   - When to use each command
   - Decision trees
   - Learning path

### Files to Read First
- All 19 command files in `/commands/` (these are the source of truth for each command's behavior)
- `README.md` (for command list)
- `docs/CHEAT-SHEET.md` (created in Session 2)

### Differentiation from CHEAT-SHEET.md
COMMAND-GUIDE.md is the **comprehensive reference** (textbook chapter). CHEAT-SHEET.md is the **quick reference** (card taped to monitor). Specifically:
- CHEAT-SHEET.md: One-page, no explanations, just taskâ†’command mappings. Fits on a printed page.
- COMMAND-GUIDE.md: Full documentation per command (purpose, when to use, what it does, examples, tips). Includes learning path and troubleshooting.
- The "I Want To..." section here should be MORE detailed than CHEAT-SHEET.md's version, with subcategories and context.
- Do NOT duplicate the glossary from CHEAT-SHEET.md â€” link to CONCEPTS.md instead.

---

## Implementation Steps

### Step 1: Create Branch
```bash
git checkout -b v0.0.7-alpha-p1-s5
```

### Step 2: Review All 19 Commands

**Essential Commands** (4):
- [ ] `/knowledge:init` - Initialize knowledge graph
- [ ] `/knowledge:capture-lesson` - Document lessons
- [ ] `/knowledge:status` - View KG status
- [ ] `/knowledge:recall` - Search knowledge

**Intermediate Commands** (8):
- [ ] `/knowledge:update-graph` - Sync lessons to KG
- [ ] `/knowledge:add-category` - Add custom category
- [ ] `/knowledge:session-summary` - Summarize chat
- [ ] `/knowledge:list` - List all KGs
- [ ] `/knowledge:switch` - Change active KG
- [ ] `/knowledge:check-sensitive` - Scan for secrets
- [ ] `/knowledge:config-sanitization` - Setup pre-commit hooks
- [ ] `/knowledge:extract-chat` - Extract chat history

**Advanced Commands** (7):
- [ ] `/knowledge:meta-issue` - Track complex problems
- [ ] `/knowledge:start-issue-tracking` - Init issue tracking
- [ ] `/knowledge:update-issue-plan` - Sync with GitHub
- [ ] `/knowledge:link-issue` - Link to GitHub issues
- [ ] `/knowledge:archive-memory` - Archive MEMORY.md
- [ ] `/knowledge:restore-memory` - Restore memories
- [ ] `/knowledge:sync-all` - Full sync pipeline

### Step 3: Create docs/COMMAND-GUIDE.md

**Structure**:
```markdown
# Command Reference Guide

Complete guide to all 19 knowledge graph commands, organized by difficulty with learning paths.

---

## Quick Navigation

- [I Want To...](#i-want-to) - Task-based command finder
- [Learning Path](#learning-path) - Progression from beginner to advanced
- [Essential Commands](#essential-commands) - Start here (4 commands)
- [Intermediate Commands](#intermediate-commands) - Daily use (8 commands)
- [Advanced Commands](#advanced-commands) - Power features (7 commands)
- [Command Comparison](#command-comparison) - When to use which

---

## I Want To...

**Getting Started**:
- Set up a new knowledge graph â†’ `/knowledge:init`
- See what's in my knowledge graph â†’ `/knowledge:status`
- Document what I just learned â†’ `/knowledge:capture-lesson`

**Daily Use**:
- Find something I documented before â†’ `/knowledge:recall "search query"`
- Update my knowledge graph â†’ `/knowledge:update-graph`
- Summarize this conversation â†’ `/knowledge:session-summary`

**Team Collaboration**:
- Share knowledge safely â†’ `/knowledge:config-sanitization`
- Check for sensitive data â†’ `/knowledge:check-sensitive`
- Link lessons to GitHub issues â†’ `/knowledge:link-issue`

**Advanced Workflows**:
- Track a complex bug â†’ `/knowledge:meta-issue`
- Archive old memories â†’ `/knowledge:archive-memory`
- Run full sync pipeline â†’ `/knowledge:sync-all`

---

## Learning Path

### Week 1: Essential Commands

**Goal**: Capture your first 5 lessons

1. **Day 1**: Setup
   - Run `/knowledge:init`
   - Verify with `/knowledge:status`

2. **Day 2-5**: Daily capture
   - After solving each problem: `/knowledge:capture-lesson`
   - Review captured lessons: `/knowledge:status`

3. **End of week**: Search
   - Practice searching: `/knowledge:recall "database"`
   - Goal: Find lessons you captured

**Success**: 5 lessons documented, can find them via search

---

### Week 2-4: Intermediate Commands

**Goal**: Make knowledge graph part of daily workflow

1. **Add custom categories** (if needed)
   - `/knowledge:add-category` for team-specific categories

2. **Sync regularly**
   - End of each day: `/knowledge:update-graph`
   - Keeps knowledge graph current

3. **Summarize important sessions**
   - After important discussions: `/knowledge:session-summary`

4. **Work with multiple KGs** (optional)
   - `/knowledge:list` to see all
   - `/knowledge:switch` to change active

**Success**: Knowledge graph updates daily, MEMORY.md reflects learnings

---

### Month 2+: Advanced Commands

**Goal**: Power user features for complex workflows

1. **Team safety**
   - `/knowledge:config-sanitization` (one-time setup)
   - `/knowledge:check-sensitive` (before sharing)

2. **Complex problem tracking**
   - `/knowledge:meta-issue` for multi-attempt bugs
   - `/knowledge:start-issue-tracking` for systematic tracking

3. **GitHub integration**
   - `/knowledge:link-issue` to connect lessons with issues
   - `/knowledge:update-issue-plan` to sync with GitHub

4. **Memory management**
   - `/knowledge:archive-memory` when MEMORY.md gets large
   - `/knowledge:restore-memory` to bring back old patterns

**Success**: Full integration with team workflow, GitHub tracking active

---

## Essential Commands

### ðŸŸ¢ `/knowledge:init`

**Purpose**: Initialize a new knowledge graph

**When to use**:
- First time setup
- Starting a new project
- Creating a separate KG for different work

**What it does**:
1. Creates directory structure (`/lessons-learned/`, `/decisions/`, etc.)
2. Copies templates to your project
3. Initializes configuration
4. Sets up git integration

**Time**: 2-3 minutes

**Example**:
```bash
/knowledge:init

# Claude asks:
# - Project name?
# - Enable git tracking? (yes/no)
# - Sanitization strategy?
```

**Next steps**: Run `/knowledge:status` to verify setup

---

### ðŸŸ¢ `/knowledge:capture-lesson`

**Purpose**: Document what you just learned or solved

**When to use**:
- Just solved a problem
- Discovered a pattern
- Fixed a tricky bug
- Learned something worth remembering

**What it does**:
1. Asks about the problem, solution, root cause
2. Auto-fills template with git metadata
3. Detects category (architecture/process/patterns/debugging)
4. Saves to `lessons-learned/` directory
5. Updates index files

**Time**: 5-10 minutes (faster with practice)

**Example**:
```bash
/knowledge:capture-lesson

# Claude guides you through:
# 1. What problem did you encounter?
# 2. What was the root cause?
# 3. How did you solve it?
# 4. How can this be prevented?
```

**Tips**:
- Capture while problem is fresh (don't wait)
- Include error messages verbatim
- Note what DIDN'T work (helps future you)

---

### ðŸŸ¢ `/knowledge:status`

**Purpose**: View what's in your knowledge graph

**When to use**:
- Verify setup worked
- See recent lessons
- Check MEMORY.md status
- Quick health check

**What it shows**:
- Total lessons, decisions, knowledge entries
- Recent additions (last 5)
- Active category counts
- MEMORY.md size and last update
- Git status (if enabled)

**Time**: Instant

**Example output**:
```
ðŸ“Š Knowledge Graph Status: my-project

Lessons Learned: 23
Decisions (ADRs): 5
Knowledge Entries: 12
Session Summaries: 8

Recent:
- 2024-01-15: Debugging PostgreSQL Timeouts
- 2024-01-14: API Rate Limiting Pattern
- 2024-01-13: React Performance Optimization

MEMORY.md: 156 lines, updated 2 days ago
Git: âœ“ Clean, branch: main
```

---

### ðŸŸ¢ `/knowledge:recall`

**Purpose**: Search across all knowledge

**When to use**:
- "I solved this before..."
- Looking for a pattern
- Need to find a decision
- Searching for context

**What it searches**:
- Lessons learned (full text)
- Decisions (ADRs)
- Knowledge entries (patterns, gotchas)
- Session summaries
- MEMORY.md

**Time**: 1-2 seconds

**Example**:
```bash
/knowledge:recall "database timeout"

# Results:
# 1. Lesson: Debugging PostgreSQL Connection Timeouts (2024-01-15)
# 2. Knowledge: Connection Pool Best Practices
# 3. Decision: ADR-003: Choosing Connection Pool Library
```

**Search tips**:
- Use specific terms ("PostgreSQL timeout" > "database")
- Try synonyms if nothing found
- Search by date: `/knowledge:recall "2024-01"`
- Search by category: `/knowledge:recall "architecture"`

---

## Intermediate Commands

> **IMPORTANT**: Document ALL 8 Intermediate commands using the EXACT same structure as the Essential commands above. For each command, include:
> - `### ðŸŸ¡ /knowledge:<command-name>`
> - **Purpose**: One-line description
> - **When to use**: 3-4 bullet points describing scenarios
> - **What it does**: Numbered step-by-step of what happens when the command runs
> - **Time**: Estimated duration
> - **Example**: Realistic usage showing the command invocation and expected output
> - **Tips** or **Next steps**: (where appropriate)
>
> Read each command file in `/commands/` to understand its actual behavior. Do NOT assume or guess â€” the command files are the source of truth.

**Commands to document in this section** (in this order):

1. **`/knowledge:update-graph`** â€” Extracts patterns from lessons, updates KG entries, syncs MEMORY.md
2. **`/knowledge:add-category`** â€” Adds a custom category with optional prefix to the KG
3. **`/knowledge:session-summary`** â€” Creates a summary of the current or recent work session
4. **`/knowledge:list`** â€” Lists all configured knowledge graphs from kg-config.json
5. **`/knowledge:switch`** â€” Changes the active knowledge graph
6. **`/knowledge:check-sensitive`** â€” Scans KG files for potentially sensitive information
7. **`/knowledge:config-sanitization`** â€” Interactive wizard to set up pre-commit sanitization hooks
8. **`/knowledge:extract-chat`** â€” Extracts chat history from Claude/Gemini local logs

---

## Advanced Commands

> **IMPORTANT**: Document ALL 7 Advanced commands using the EXACT same structure. Read each command file in `/commands/` first.

**Commands to document in this section** (in this order):

1. **`/knowledge:meta-issue`** â€” Initialize structured tracking for complex multi-attempt problems
2. **`/knowledge:start-issue-tracking`** â€” Initialize issue tracking with documentation and Git branch
3. **`/knowledge:update-issue-plan`** â€” Synchronize KG extraction with active plans and issue tracking
4. **`/knowledge:link-issue`** â€” Manually link existing lesson or ADR to a GitHub issue
5. **`/knowledge:archive-memory`** â€” Archive stale MEMORY.md entries to prevent bloat
6. **`/knowledge:restore-memory`** â€” Restore archived entries from MEMORY-archive.md
7. **`/knowledge:sync-all`** â€” Run the full 4-step sync pipeline in one command

---

## Command Comparison

### Capture vs Update vs Sync

**Three ways to save learnings**:

1. **`/knowledge:capture-lesson`**
   - Creates NEW lesson file
   - Guided interview process
   - Use: When documenting new learnings

2. **`/knowledge:update-graph`**
   - Extracts patterns from existing lessons
   - Updates knowledge entries
   - Syncs to MEMORY.md
   - Use: Daily/weekly to consolidate

3. **`/knowledge:sync-all`**
   - Full 4-step pipeline (capture â†’ update â†’ sync â†’ archive)
   - Comprehensive sync
   - Use: Weekly deep sync or before sharing

**When to use which**:
- Just solved problem â†’ `capture-lesson`
- End of day/week â†’ `update-graph`
- Major milestone â†’ `sync-all`

---

### Status vs Recall vs List

**Three ways to view knowledge**:

1. **`/knowledge:status`**
   - High-level overview
   - Recent activity
   - Quick health check
   - Use: Daily check-in

2. **`/knowledge:recall`**
   - Deep search
   - Find specific content
   - Full-text search
   - Use: Looking for something specific

3. **`/knowledge:list`**
   - Shows all KGs (if multiple)
   - Metadata only
   - Use: Switching between projects

---

## Troubleshooting

### "Command not found"

**Problem**: Claude doesn't recognize `/knowledge:...` command

**Solutions**:
1. Verify plugin installed: Check Claude Code > Extensions
2. Restart Claude Code
3. Update plugin: Check for updates in marketplace
4. Check active KG: Run `/knowledge:status`

---

### "No active knowledge graph"

**Problem**: Commands fail with "no active KG"

**Solutions**:
1. Run `/knowledge:init` to create first KG
2. Run `/knowledge:list` to see available KGs
3. Run `/knowledge:switch` to activate existing KG

---

### "MEMORY.md is too large"

**Problem**: MEMORY.md over 200 lines, slowing down sessions

**Solutions**:
1. Run `/knowledge:archive-memory` to archive old entries
2. Review archived entries: Check `MEMORY-archive.md`
3. Restore if needed: `/knowledge:restore-memory`

---

## Related Documentation

- **[Quick Reference](CHEAT-SHEET.md)** - One-page command cheat sheet
- **[Concepts Guide](CONCEPTS.md)** - Plain-English term explanations
- **[Getting Started](GETTING-STARTED.md)** - Installation and first steps
- **[Patterns Guide](../core/docs/PATTERNS-GUIDE.md)** - Writing effective entries

---

**Updated**: 2026-02-19
```

### Step 4: Add Cross-References
- [ ] Link from README.md to COMMAND-GUIDE.md
- [ ] Link from CHEAT-SHEET.md to COMMAND-GUIDE.md
- [ ] Reference from CONCEPTS.md

---

## Acceptance Criteria

### Content Completeness
- [ ] All 19 commands documented
- [ ] Each command has: Purpose, When to use, What it does, Time estimate, Example
- [ ] Learning path covers 3 stages (Week 1, Week 2-4, Month 2+)
- [ ] "I Want To..." section covers 15+ common tasks
- [ ] Decision trees for command comparisons

### Quality
- [ ] Language beginner-friendly (no unexplained jargon)
- [ ] Examples realistic and helpful
- [ ] Troubleshooting section addresses common issues
- [ ] Cross-references to other guides

### Structure
- [ ] Table of contents for easy navigation
- [ ] Difficulty badges consistent (ðŸŸ¢ðŸŸ¡ðŸ”´)
- [ ] Sections logically ordered (Essential â†’ Intermediate â†’ Advanced)

---

## Definition of Done

### Code Changes
- [ ] docs/COMMAND-GUIDE.md created (~500-600 lines)
- [ ] Cross-references added to README, CHEAT-SHEET, CONCEPTS

### Quality Checks
- [ ] All 19 commands accounted for
- [ ] User reviews learning path (makes sense)
- [ ] Link checker run
- [ ] Spell check

### Git Workflow
- [ ] Branch pushed: `git push -u origin v0.0.7-alpha-p1-s5`
- [ ] No merge conflicts

---

## Verification Commands

```bash
# Create branch
git checkout -b v0.0.7-alpha-p1-s5

# Verify all commands documented
grep -E "^### .*\/knowledge:" docs/COMMAND-GUIDE.md | wc -l  # Should be 19

# Commit
git commit -m "docs: create comprehensive command guide with learning path

- Documented all 19 commands with purpose, usage, examples
- Created progressive learning path (Week 1 â†’ Month 2+)
- Added 'I Want To...' task-based command finder
- Included command comparison and troubleshooting
- Improves command discoverability and adoption

Co-Authored-By: Claude Opus 4.6 <noreply@anthropic.com>"

# Push
git push -u origin v0.0.7-alpha-p1-s5

# Branch remains open for review - DO NOT MERGE YET
# Merging will be done manually after review
```

---

## Next Session

**After this session completes**:
- [ ] Branch pushed to origin: v0.0.7-alpha-p1-s5
- [ ] Branch ready for review (do not merge yet)
- [ ] Proceed to Session 6: Simplify WORKFLOWS.md
- [ ] Branch name: `v0.0.7-alpha-p1-s6`

---

**Status**: â¬œ Not Started
**Last Updated**: 2026-02-20 (Opus review revision â€” expanded Intermediate/Advanced command guidance)
