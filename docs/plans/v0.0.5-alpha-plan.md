# v0.0.5-alpha Release Plan

## Context
Plugin validation (run 2026-02-17) identified 4 major issues and 11 warnings to resolve before wider distribution. Additionally, `update-issue-plan.md` references `/knowledge:start-issue-tracking` in two places as a dependency â€” the command was always planned but never ported from the optimize-my-resume source workflow. This release resolves all validation findings and adds the missing command.

Version bump: `0.0.4-alpha` â†’ `0.0.5-alpha`

---

## Implementation Checklist

- [x] 0. Create git branch `v0.0.5-alpha` from `main`
- [x] 1. Fix `.gitignore` inline comments (also removed erroneous `docs/plans/` exclusion)
- [x] 2. Remove empty `mcp-server/.claude-plugin/` directory
- [x] 3. Remove root-level `node_modules/`
- [x] 4. Standardize command frontmatter (drop `name` from 3 commands)
- [x] 5. Add `.gitkeep` to empty committed directories
- [x] 6. Fix `hooks/hooks.json` missing `comment` on first entry
- [x] 7. Fix dangling `/knowledge:start-issue-tracking` refs in `update-issue-plan.md`
- [x] 8. Fix `session-summary.md` template not in fenced code block
- [x] 9. Create `commands/start-issue-tracking.md`
- [x] 10a. Bump versions in `plugin.json` and `marketplace.json`
- [x] 10b. Update `README.md` (version, status, command count, command list, summary)
- [x] 10c. Add `CHANGELOG.md` entry for v0.0.5-alpha
- [x] 10d. Update `ROADMAP.md` with v0.0.5-alpha section and footer

---

## Changes

### 1. Fix .gitignore inline comments (ðŸ”´ Silent bug â€” W10)

**File:** `.gitignore`

Git does not support inline comments on pattern lines. These lines are silently broken:
```
docs/lessons-learned/debugging/  # Personal debugging notes
docs/sessions/                    # Session summaries (always private)
docs/chat-history/                # Chat exports (always private)
# Note: architecture/ and patterns/ are committed for team sharing
```

Fix: Move comments to standalone lines above each pattern.

---

### 2. Remove empty `mcp-server/.claude-plugin/` directory (Major Issue 2)

```bash
rm -rf mcp-server/.claude-plugin
```

---

### 3. Remove root-level `node_modules/` (Major Issue 3)

No root `package.json` exists. The root `node_modules/` is leftover cruft.

```bash
rm -rf node_modules
```

---

### 4. Standardize command frontmatter â€” drop `name` field (Major Issue 4)

Only 3 of 18 commands have `name` in frontmatter (`recall.md`, `list.md`, `session-summary.md`). The filename drives command registration. Remove `name` from those 3 to standardize on `description`-only.

**Files to edit:**
- `commands/recall.md`
- `commands/list.md`
- `commands/session-summary.md`

---

### 5. Add .gitkeep to empty committed directories (W9)

```bash
touch docs/lessons-learned/architecture/.gitkeep
touch docs/lessons-learned/patterns/.gitkeep
```

---

### 6. Add `comment` to first hook entry (W6)

**File:** `hooks/hooks.json`

The first `SessionStart` hook (check-memory.sh) is missing a `comment` field. Add:
```json
"comment": "Validate KG configuration and display active knowledge graph status"
```

---

### 7. Fix dangling reference to `/knowledge:start-issue-tracking` (W4)

**File:** `commands/update-issue-plan.md` â€” two references at lines ~61 and ~203.

Refs resolve once Step 9 creates the command. Verify references point correctly.

---

### 8. Fix session-summary template formatting (W11)

**File:** `commands/session-summary.md`

Wrap the embedded markdown template (lines ~140-195) in a ` ```markdown ` fenced code block to clearly separate template from instruction prose.

---

### 9. Create `start-issue-tracking` command (New â€” closes dangling ref in W4)

**Source:** `/Users/mkaplan/Documents/GitHub/optimize-my-resume/.agent.bak/workflows/plan-start-issue.md` (v9.4.1, 462 lines)

**Target:** `commands/start-issue-tracking.md`

Full port of the source workflow, sanitized for portability. Key adaptations:
- **Remove all project-specific references:** no job search domain, no optimize-my-resume paths, no hardcoded directories
- **Replace hardcoded paths** with dynamic KG config resolution (read `~/.claude/kg-config.json` â†’ active KG path)
- **LLM-platform-agnostic:** no Claude-specific API calls, no model references, instructions written as universal imperative steps
- **Keep full workflow intact:**
  1. Discourse capture & behavior lock (pre-flight checks)
  2. Verification & versioning gate (interactive prompt)
  3. Issue number determination (auto-detect or prompt)
  4. Directory structure creation under `{active_kg_path}/issues/`
  5. Issue documentation generation (issue.md with metadata)
  6. Git integration: `git checkout -b issue/{number}-{slug}` (generic, no `/gov-git-branch`)
  7. Knowledge graph synchronization via `/knowledge:update-issue-plan`
- **Keep smart defaults:** auto-detect parent branch, version from git, issue type, next issue number from existing `issues/` directory
- **Add frontmatter:** `description`, `allowed-tools: [Bash, Read, Write, Edit, Glob, Grep]`
- **Integration section:** reference `/knowledge:update-issue-plan`, `/knowledge:link-issue`, `/knowledge:meta-issue`

---

### 10. Version bump + documentation updates

#### Config files
- `.claude-plugin/plugin.json` line 3: `"version": "0.0.4-alpha"` â†’ `"0.0.5-alpha"`
- `.claude-plugin/marketplace.json` line 13: inner plugin entry version â†’ `"0.0.5-alpha"`
- Note: outer marketplace.json `"version": "1.0.0"` is the registry wrapper â€” leave unchanged

#### README.md

**Header block** â€” update version and status:
```
(v0.0.4-alpha) â†’ (v0.0.5-alpha)
Status: MEMORY.md Restore Capability Release â†’ Validation & Issue Tracking Release
```

**Command count** â€” update from 18 â†’ 19 commands.

**Commands section** â€” add `start-issue-tracking` to the Knowledge Capture category:
```
- Knowledge Capture: capture-lesson, meta-issue, session-summary, extract-chat, start-issue-tracking
```

**Bottom summary paragraph** â€” update:
```
Old: The plugin is actively in development with v0.0.4-alpha released on 2026-02-16,
     incorporating MEMORY.md restore capabilities.

New: The plugin is actively in development with v0.0.5-alpha released on 2026-02-17,
     incorporating validation fixes and a cross-project issue tracking initialization workflow.
```

#### CHANGELOG.md

Insert new section at top (after `## [Unreleased]`, before `## [0.0.4-alpha]`):

```markdown
## [0.0.5-alpha] - 2026-02-17

### Added
- `/knowledge:start-issue-tracking` command (19th command) â€” Full issue initialization
  workflow, fully ported from prior project and sanitized for cross-project portability
  and LLM-platform-agnostic use. Features:
  - Auto-detects parent branch, version from git tag, issue type, and next issue number
    from existing `issues/` directory
  - Smart defaults reduce interactive prompts to 1 (issue description only)
  - Creates structured directory under `{active_kg_path}/issues/{number}-{slug}/`
  - Generates `issue.md` with full metadata (title, type, branch, version, date, scope)
  - Git branch creation: `git checkout -b issue/{number}-{slug}`
  - Knowledge graph synchronization via `/knowledge:update-issue-plan`
  - Integrates with `/knowledge:link-issue` and `/knowledge:meta-issue`
  - No project-specific dependencies; uses KG config for all path resolution

### Fixed
- `.gitignore` inline comments on pattern lines (3 paths were silently not being ignored
  because git does not support inline comments on pattern lines)
- Truncated marketplace slug `stayinginsync-knowledge-grap` (missing trailing `h`) in
  `.claude/settings.json` and plugin cache `settings.json` â€” caused plugin-not-found
  errors on every session start
- Dangling `/knowledge:start-issue-tracking` references in `commands/update-issue-plan.md`
  (lines ~61 and ~203) now resolve to the newly created command
- First `SessionStart` hook entry (check-memory.sh) missing `comment` field
- Session-summary command markdown template embedded as raw prose instead of fenced
  code block, causing visual ambiguity between instruction and template content
- Standardized command frontmatter: removed `name` field from `recall.md`, `list.md`,
  and `session-summary.md` for consistency with all other 15 commands

### Removed
- Empty `mcp-server/.claude-plugin/` artifact directory (leftover from refactoring,
  risked being parsed as a nested plugin by plugin discovery tools)
- Orphaned root-level `node_modules/` directory (no root `package.json` exists;
  packages were installed by mistake at an earlier point)

### Documentation
- Added `docs/lessons-learned/architecture/.gitkeep` and
  `docs/lessons-learned/patterns/.gitkeep` to preserve empty tracked directories
- Updated ROADMAP.md with v0.0.5-alpha section
- Updated README.md version, status line, and command count (18 â†’ 19)
- Added implementation plan: `docs/plans/v0.0.5-alpha-plan.md`

**Version**: 0.0.4-alpha â†’ 0.0.5-alpha
```

#### ROADMAP.md

Insert new `v0.0.5-alpha` section **after the v0.0.4-alpha block** and **before v1.0.0**:

```markdown
**v0.0.5-alpha** (Released 2026-02-17) - Validation & Issue Tracking Release
- `/knowledge:start-issue-tracking` â€” Full issue initialization workflow (19th command)
  - Ported from optimize-my-resume, sanitized for cross-project portability
  - LLM-platform-agnostic (no Claude-specific API calls)
  - Auto-detects: parent branch, version from git, issue type, next issue number
  - Smart defaults reduce prompts to 1 (issue description)
  - Creates issue directory structure under `{active_kg_path}/issues/`
  - Generates issue.md with metadata, git branch, KG sync
  - Integrates with `/knowledge:update-issue-plan` and `/knowledge:link-issue`
- Fixed `.gitignore` inline comment bug (silently prevented 3 paths from being ignored)
- Removed orphaned `mcp-server/.claude-plugin/` artifact directory
- Removed root-level `node_modules/` with no root `package.json`
- Standardized command frontmatter (removed `name` field from 3 commands)
- Fixed dangling `/knowledge:start-issue-tracking` references in `update-issue-plan.md`
- Fixed first `SessionStart` hook entry missing `comment` field
- Fixed session-summary template not fenced in code block
- Confirmed: `SessionStart` hook event name is valid and working
- Deferred: grep+sed â†’ jq refactor in hook scripts (v0.0.6)
- Deferred: plugin name consolidation `"knowledge"` â†’ `"knowledge-graph"` (v0.0.6)
```

Update footer:
```
Old: *Last updated: 2026-02-16*  /  *Plugin Version: 0.0.2-alpha*
New: *Last updated: 2026-02-17*  /  *Plugin Version: 0.0.5-alpha*
```

#### Files NOT to update (historical version annotations)
- `docs/decisions/ADR-001-defer-memory-rules-engine.md` â€” all v0.0.4 references are historical context
- `commands/archive-memory.md` line 365 â€” "restore-memory command (v0.0.4-alpha)" is when the feature was introduced
- `commands/restore-memory.md` line 618 â€” version annotation for when command was added
- `skills/knowledge-graph-usage/SKILL.md` line 267 â€” "(NEW - v0.0.4)" documents when feature was added

---

## Deferred (not in this release)

- **W7 (jq refactor):** Replacing grep+sed JSON parsing in hook scripts with jq. Defer to v0.0.6.
- **Major Issue 1 (plugin name):** `"knowledge"` â†’ `"knowledge-graph"` rename requires coordinated settings updates. Defer to v0.0.6.
- **W2 (marketplace source URL):** Update `source: "./"` only at time of public marketplace publication.
- **W3 (hardcoded model):** Minor cosmetic issue in commit template. Defer.
- **W8 (empty examples dir):** Add examples as they develop. Defer.
- **SessionStart event name (W5):** CONFIRMED WORKING â€” hooks fire at session start. Validator finding was incorrect.

---

## Verification

- `grep -n "# " .gitignore` â€” confirm no inline comments on pattern lines
- `ls mcp-server/.claude-plugin` â€” should fail (directory gone)
- `ls node_modules` â€” should fail (directory gone)
- `ls commands/start-issue-tracking.md` â€” should exist
- `grep "start-issue-tracking" commands/update-issue-plan.md` â€” should resolve correctly
- Plugin reload in Claude Code â€” confirm no errors on startup
