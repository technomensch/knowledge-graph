#!/bin/bash
# post-commit hook: Suggest capturing lesson after lesson-worthy commits
#
# Installation:
#   cp core/examples-hooks/post-commit-lesson-suggestion .git/hooks/post-commit
#   chmod +x .git/hooks/post-commit
#
# Or use /knowledge:init wizard to install automatically

commit_msg=$(git log -1 --pretty=%B)

# Check if commit message contains lesson-worthy keywords
if echo "$commit_msg" | grep -qiE "(fix|solved|debug|implement|refactor|pattern|architecture)"; then
  echo ""
  echo "ðŸ’¡ Lesson-worthy commit detected: $(git log -1 --pretty=%h) - ${commit_msg:0:60}"
  echo "   Consider capturing this lesson while context is fresh:"
  echo "   /knowledge:capture-lesson"
  echo ""
  echo "   Tip: Capturing within 30 minutes yields higher quality documentation"
  echo ""
fi
